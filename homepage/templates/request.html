{% extends 'base.html' %}

{% block title %}
    Request A Pickup | We Can Project
{% endblock %}

{% block content %}
<div class="container mt-5">
    <div class="row">
        <div class="col-lg-8">
            <div class="p-4 rounded shadow-sm bg-white">
                <h2 class="mb-4 text-center">Request A Pickup</h2>
                <form method="post" action="{% url 'request_pickup' %}">
                    {% csrf_token %}
                    <div class="mb-3">
                        <label for="ready_for_pickup" class="form-label">
                            Are you ready for your bin to be picked up?
                        </label>
                        <select class="form-select" id="ready_for_pickup" name="ready_for_pickup" required>
                            <option value="">Select an option</option>
                            <option value="yes">Yes</option>
                            <option value="no">No</option>
                        </select>
                    </div>
                    <div class="d-grid">
                        <button type="submit" class="btn btn-success">
                            Submit Request
                        </button>
                    </div>
                </form>
            </div>
        </div>

        <div class="col-lg-4 mt-4 mt-lg-0">
            <div class="p-4 rounded shadow-sm bg-light">
                <h4 class="mb-3 text-center">Pickup Request Status</h4>
                <div>
                    {% if pickup_request %}
                        <p><strong>Status:</strong> {{ pickup_request.status }}</p>
                        <p><strong>Request Date:</strong> {{ pickup_request.created_at|date:"F j, Y g:i A" }}</p>
                        {% if pickup_request.status == "Accepted" %}
                            <div class="alert alert-success mt-3" role="alert">
                                Our team will be out to pick up your bin on the designated day, depending on the zone of your house.
                            </div>
                        {% endif %}
                    {% else %}
                        <p class="text-muted">No pickup request submitted yet.</p>
                    {% endif %}
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}
